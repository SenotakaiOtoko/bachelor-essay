\section{Проектирование}
\subsection{Требования к функциональным характеристикам}
Программа должна обеспечивать возможность выполнения перечисленных ниже функций:
\begin{itemize}
  \item Загрузка и хранение фотографий с возможностью просмотра и дальнейшего скачивания;
  \item Разграничение прав доступа, регистрация пользователей с подтверждением прохождения регистрации посредством email или смс, авторизация пользователей;
  \item Организация хранилища фотографий пользователей в автоматическом или полуавтоматическом режиме с возможностью осуществления дальнейшего поиска по необходимым критериям;
  \item Возможность публикации фотографий в сети интернет;
  \item Возможность комментирования и оценивания фотографий, загруженных в сервис;
  \item Индексирование загружаемых фотографий по цветам для осуществления возможности дальнейшего поиска фотографий по цветам;
  \item Классификация фотографий с использованием нейронных сетей и индексирование результатов с целью возможности дальнейшего поиска фотографий по данному критерию;
\end{itemize}
\subsection{Общее описание}
\subsection{Варианты использования}
Перечень вариантов использования системы приведена в таблице \ref{use-case-table}.
Диаграмма вариантов использования на рисунке \ref{use-case} показывает варианты использования системы и связанные с ними действующие лица.

\begin{table}[H]
  \caption{Варианты использования системы хранения фотографий}\label{use-case-table}
  \begin{tabular}{|l|p{3cm}|}
  \hline Основное действующее лицо & Вариант использования \\
  \hline Посетитель & 1. Пройти регистрацию \\
  \hline  & 2. Просмотреть ленту популярных фотографий \\
  \hline  & 3. Просмотреть фотографии пользователя \\
  \hline  & 4. Просмотреть информацию о фотографии \\
  \hline  & 5. Осуществить поиск фотографии по необходимым критериям \\
  \hline  & 6. Авторизоваться \\
  \hline Пользователь & 1. Привязать популярные соц сети \\
  \hline  & 2. Создать пост в соц сетях \\
  \hline  & 3. Настроить приватность фотографии \\
  \hline  & 4. Настроить защиту от копирования \\
  \hline  & 5. Оценить фотографию \\
  \hline  & 6. Прокомментировать фотографию \\
  \hline  & 7. Просмотреть статистику \\
  \hline  & 8. Сохранить в избранное \\
  \hline  & 9. Подписаться на публикации других пользователей \\
  \hline  & 10. Опубликовать фотографию \\
  \hline
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 1 – Пройти регистрацию}\label{use-case-1-table}
  \begin{tabular}{|l|p{4cm}|}
  \hline № варианта использования: & Вариант использования - 1 \\
  \hline Название варианта использования: & Пройти регистрацию \\
  \hline Действующие лица: & Посетитель \\
  \hline Описание: & Посетитель заполняет форму со своими данными для последующей авторизации и подтверждает регистрацию \\
  \hline Предварительные условия: & Нет \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 1.0  Пройти регистрацию \\
  \hline  & 1. Пользователь заполняет форму с данными, основными являются логин, пароль и email или номер телефона \\
  \hline  & 2. Нажимает кнопку регистрации на форме \\
  \hline  & 3. Система создает в БД запись о пользователе и генерирует токен для подтверждения учетной записи. Токен отправляется посредством email или смс \\
  \hline  & 4. Пользователь получает токен для подтверждения прохождения регистрации \\
  \hline  & 5. Подтверждает регистрацию на сайте \\
  \hline  & 6. Система отмечает, что пользователь успешно зарегистрирован и авторизовывает его. Посетитель становится пользователем. \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: & 1.0.И.1 Пользователь ввел пароль, не удовлетворяющий условиям безопасности \\
  \hline  & 1. Сообщение об ошибке, возврат к пункту 1. \\
  \hline  & 1.2.И.2 Пользователь ввел неверный токен для подтверждения регистрации \\
  \hline  & 1. Сообщение об ошибке, генерация нового токена и повторная отправка \\
  \hline Включает: &  \\
  \hline Приоритет: & Высокий \\
  \hline Особые требования: &  \\
  \hline
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 2 – Просмотреть ленту популярных фотографий}\label{use-case-2-table}
  \begin{tabular}{|l|p{5cm}|}
  \hline № варианта использования: & Вариант использования - 2 \\
  \hline Название варианта использования: & Просмотреть ленту популярных фотографий \\
  \hline Действующие лица: & Посетитель \\
  \hline Описание: & Посетитель открывает веб страницу, на которой содержатся все популярные фотографии за определенный промежуток времени \\
  \hline Предварительные условия: & В сервисе загружены фотографии, доступ к которым разрешен всем \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 2.0 Просмотреть ленту популярных фотографий \\
  \hline  & 1. Посетитель открывает страницу с популярными фотографиями \\
  \hline  & 2. Сервис формирует список популярных фотографий, доступных всем, за определенный промежуток времени и отправляет посетителю \\
  \hline  & 3. Посетитель путем скроллинга веб страницы осуществляет просмотр популярных фотографий \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: & 2.0.И.1 Отсутствуют фотографии, доступные всем \\
  \hline  & 1. Сообщение об ошибке на странице просмотра фотографий \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: & \\
  \hline
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 3 – Просмотреть ленту популярных фотографий}\label{use-case-3-table}
  \begin{tabular}{|l|p{6cm}|}
  \hline № варианта использования: & Вариант использования - 3 \\
  \hline Название варианта использования: & Просмотреть фотографии пользователя \\
  \hline Действующие лица: & Посетитель \\
  \hline Описание: & Посетитель просматривает фотографии пользователя, доступные всем \\
  \hline Предварительные условия: & Пользователь, фотографии которого пытается просмотреть посетитель, существует и загрузил хотя бы одну фотографию, доступную для просмотра всем \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 3.0 Просмотреть фотографии пользователя \\
  \hline  & 1. Посетитель открывает страницу в профиле пользователя с фотографиями \\
  \hline  & 2. Сервис формирует список фотографий пользователя, доступный всем \\
  \hline  & 3. Посетитель путем скроллинга веб страницы осуществляет просмотр фотографий \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: & 3.0.И.1 Пользователь, фотографии которого пытается просмотреть посетитель, не существует \\
  \hline  & 1. Сообщение об ошибке, система перенаправляет пользователя к главному окну \\
  \hline  & 3.0.И.2 Пользователь, фотографии которого пытается просмотреть посетитель, не сделал ни одной фотографии доступной всем \\
  \hline  & 1. Сообщение об ошибке на странице просмотра фотографий \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 4 - Просмотреть информацию о фотографии}\label{use-case-4-table}
  \begin{tabular}{|l|p{7cm}|}
  \hline № варианта использования: & Вариант использования - 4 \\
  \hline Название варианта использования: & Просмотреть информацию о фотографии \\
  \hline Действующие лица: & Посетитель \\
  \hline Описание: & Посетитель просматривает информацию о фотографии, такую как метаданные фотографии, теги, количество пользователей, которым понравилась фотография и т.п.  \\
  \hline Предварительные условия: & Фотография, информацию о которой пытается просмотреть посетитель, существует и доступна для просмотра всем \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 4.0 Просмотреть информацию о фотографии \\
  \hline  & 1. Посетитель открывает страницу с фотографией \\
  \hline  & 2. Система находит фотографию и всю информацию о ней \\
  \hline  & 3. Посетитель просматривает доступную информацию о фотографии \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: & 4.0.И.1 Отсутствует фотография, информацию о которой. Пытается просмотреть посетитель, или фотография недоступна для всех \\
  \hline  & 1. Сообщение об ошибке, система перенаправляет пользователя к главному окну \\
  \hline  & 4.0.И.2 Не найдена какая-то информация о фотографии \\
  \hline  & 1. Сообщение об ошибке на странице просмотра информации о фотографии \\
  \hline Включает: &  \\
  \hline Приоритет: & Высокий \\
  \hline Особые требования: & \\
  \hline
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 5 – Осуществить поиск фотографии по необходимым критериям}\label{use-case-5-table}
  \begin{tabular}{|l|p{8cm}|}
  \hline № варианта использования: & Вариант использования - 5 \\
  \hline Название варианта использования: & Осуществить поиск фотографии по необходимым критериям \\
  \hline Действующие лица: & Посетитель \\
  \hline Описание: & Посетитель осуществляет поиск фотографий с необходимыми ему критериями, такими, как цвет на фотографии, содержимое фотографии и т.д. \\
  \hline Предварительные условия: & Хотя бы одна фотография загружена в сервис и проиндексирована для поиска \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 5.0 Осуществить поиск фотографии по необходимым критериям \\
  \hline  & 1. Посетитель открывает страницу поиска фотографий \\
  \hline  & 2. Вводит необходимые ему критерии \\
  \hline  & 3. Система формирует список фотографий \\
  \hline  & 4. Посетитель путем скроллинга веб страницы просматривает список найденных фотографий \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: & 5.0.И.1 Фотографии с заданными критериями поиска не найдены \\
  \hline  & 1. Сообщение об ошибке на странице поиска фотографий \\
  \hline Включает: &  \\
  \hline Приоритет: & Высокий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 6 – Авторизоваться}\label{use-case-6-table}
  \begin{tabular}{|l|p{9cm}|}
  \hline № варианта использования: & Вариант использования - 6 \\
  \hline Название варианта использования: & Авторизоваться \\
  \hline Действующие лица: & Посетитель \\
  \hline Описание: & Посетитель вводит логин и пароль от принадлежащей ему учетной записи пользователя и авторизовывается \\
  \hline Предварительные условия: & Пользователь, данные которого вводятся, зарегистрирован в системе \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 6.0 Авторизоваться \\
  \hline  & 1. Посетитель открывает страницу авторизации \\
  \hline  & 2. Вводит логин и пароль \\
  \hline  & 3. При включенной у учетной записи пользователя двухфакторинговой авторизации вводит дополнительные данные для входа \\
  \hline  & 4. Система. Авторизует пользователя и перенаправляет на главную страницу \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Высокий \\
  \hline Особые требования: &  \\
  \hline
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 7 - Привязать популярные соц сети}\label{use-case-7-table}
  \begin{tabular}{|l|p{10cm}|}
  \hline № варианта использования: & Вариант использования - 7 \\
  \hline Название варианта использования: & Привязать популярные соц сети \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь привязывает аккаунт соц сети с целью дальнейшего создания постов и публикации фотографий в соц сети \\
  \hline Предварительные условия: & Пользователь авторизован \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 7.0 Привязать популярные соц сети \\
  \hline  & 1. Пользователь открывает страницу своего профиля \\
  \hline  & 2. Выбирает необходимую ему социальную сеть из списка предложенных \\
  \hline  & 3. Система перенаправляет пользователя на страницу социальной сети для авторизации  \\
  \hline  & 4. Пользователь авторизуется в соц сети \\
  \hline  & 5. Соц сесть перенаправляет пользователя обратно в систему \\
  \hline  & 6. Система привязывает переданный соц сетью токен к пользователю \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 8 – Создать пост в соц сетях}\label{use-case-8-table}
  \begin{tabular}{|l|p{11cm}|}
  \hline № варианта использования: & Вариант использования - 8 \\
  \hline Название варианта использования: & Создать пост в соц сетях \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь при создани поста отмечает о необходимости его публикации в социальных сетях. Пост автоматически публикуется во всех отмеченных соц сетях \\
  \hline Предварительные условия: & Пользователь авторизован и хотя бы один аккаунт социальной сети привязан к аккаунту пользователя \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 8.0 Создать пост в соц сетях \\
  \hline  & 1. Пользователь переходит на страницу создания поста \\
  \hline  & 2. Формирует пост для дальнейшей публикации \\
  \hline  & 3. Публикует внутри сервиса и при публикации отмечает о необходимости публикации в аккаунте социальной сети \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 9 – Настроить приватность фотографии}\label{use-case-9-table}
  \begin{tabular}{|l|p{12cm}|}
  \hline № варианта использования: & Вариант использования - 9 \\
  \hline Название варианта использования: & Настроить приватность фотографии \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь настраивает доступ к фотографии определенному кругу лиц \\
  \hline Предварительные условия: & Пользователь авторизован и загрузил фотографию, доступ к которой хочет настроить \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 9.0 Настроить приватность фотографии \\
  \hline  & 1. Пользователь открывает страницу настроек фотографии \\
  \hline  & 2. Переходит к форме настройки листов доступа \\
  \hline  & 3. Выбирает тип доступа и настраивает листы доступа \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 10 – Оценить фотографию}\label{use-case-10-table}
  \begin{tabular}{|l|p{13cm}|}
  \hline № варианта использования: & Вариант использования - 10 \\
  \hline Название варианта использования: & Оценить фотографию \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь оценивает понравившуюся ему фотографию \\
  \hline Предварительные условия: & Пользователь авторизован и имеет доступ к фотографии, которую хочет оценить \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 10.0 Оценить фотографию \\
  \hline  & 1. Пользователь открывает страницу фотографии \\
  \hline  & 2. Нажимает кнопку оценки фотографии \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 11 – Прокомментировать фотографию}\label{use-case-11-table}
  \begin{tabular}{|l|p{13cm}|}
  \hline № варианта использования: & Вариант использования - 11 \\
  \hline Название варианта использования: & Прокомментировать фотографию \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь оставляет комментарий к фотографии или в ответ на другой комментарий \\
  \hline Предварительные условия: & Пользователь авторизован и имеет доступ к фотографии, к которой хочет оставить комментарий \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 11.0 Прокомментировать фотографию \\
  \hline  & 1. Пользователь открывает страницу фотографии \\
  \hline  & 2. Вводит комментарий в форму ввода под фотографией или необходимым комментарием и нажимает кнопку «отправить» \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 12 – Просмотреть статистику}\label{use-case-12-table}
  \begin{tabular}{|l|p{14cm}|}
  \hline № варианта использования: & Вариант использования - 12 \\
  \hline Название варианта использования: & Просмотреть статистику \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь просматривает глобальную статистику фотографий по сервису или статистику по одной из своих фотографий \\
  \hline Предварительные условия: & Пользователь авторизован \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 12.0 Просмотреть статистику \\
  \hline  & 1. Пользователь открывает страницу с глобальной статистикой \\
  \hline  & 2. Просматривает глобальную статистику фотографий по сервиису \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 13 – Сохранить в избранное}\label{use-case-13-table}
  \begin{tabular}{|l|p{15cm}|}
  \hline № варианта использования: & Вариант использования - 13 \\
  \hline Название варианта использования: & Сохранить в избранное \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь сохраняет понравившуюся фотографию в избранное внутри сервиса \\
  \hline Предварительные условия: & Пользователь авторизован и имеет доступ к фотографии, которую хочет сохранить в избранное \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 13.0 Сохранить в избранное \\
  \hline  & 1. Пользователь нажимает на кнопку «сохранить в избранное» рядом с понравившейся фотографией \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 14 – Подписаться на публикации других пользователей}\label{use-case-14-table}
  \begin{tabular}{|l|p{16cm}|}
  \hline № варианта использования: & Вариант использования - 14 \\
  \hline Название варианта использования: & Подписаться на публикации других пользователей \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь добавляет в свою персональную ленту интересных публикаций и фотографий все фотографии и посты другого пользователя \\
  \hline Предварительные условия: & Пользователь авторизован \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 14.0 Подписаться на публикации других пользователей \\
  \hline  & 1. Пользователь переходит на страницу пользователя, на публикации которого он хочет подписаться \\
  \hline  & 2. Нажимает кнопку «подписаться» \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: &  \\
  \hline 
  \end{tabular}
\end{table}

\begin{table}[H]
  \caption{Вариант использования - 15 – Опубликовать фотографию}\label{use-case-15-table}
  \begin{tabular}{|l|p{17cm}|}
  \hline № варианта использования: & Вариант использования - 15 \\
  \hline Название варианта использования: & Опубликовать фотографию \\
  \hline Действующие лица: & Пользователь \\
  \hline Описание: & Пользователь загружает фотографию в сервис \\
  \hline Предварительные условия: & Пользователь авторизован \\
  \hline Выходные условия: & Нет \\
  \hline Нормальное направление: & 15.0 Опубликовать фотографию \\
  \hline  & 1. Пользователь переходит на страницу загрузки фотографии \\
  \hline  & 2. Добавляет новую фотографию \\
  \hline  & 3. Настраивает доступ к фотографии и выставляет теги к фотографии из списка предложенных и/или самостоятельно \\
  \hline Альтернативные направления: &  \\
  \hline Исключения: &  \\
  \hline Включает: &  \\
  \hline Приоритет: & Низкий \\
  \hline Особые требования: & \\
  \hline
  \end{tabular}
\end{table}

\addimg{use-case}{0.9}{Диаграмма вариантов использования программного решения для хранения фотографий}{use-case}

\subsection{Структура базы данных}
\addimg{database-structure-1}{0.8}{Модель базы данных программного решения для хранения фотографий}{database-structure-1}

\subsection{Диаграмма классов}
\addimg{class-diagram-1}{0.8}{Диаграмма классов сущностей и репозиториев программного решения для хранения фотографий}{class-diagram-1}
\addimg{class-diagram-2}{0.8}{Диаграмма классов контроллеров программного решения для хранения фотографий}{class-diagram-2}
\clearpage